å›¾åƒæ¸…æ™°åº¦åˆ†ç±»å·¥å…·
è¿™æ˜¯ä¸€ä¸ªåŸºäºä¼ ç»Ÿè®¡ç®—æœºè§†è§‰ç®—æ³•çš„å›¾åƒæ¸…æ™°åº¦åˆ†ç±»å·¥å…·ï¼Œæ— éœ€æ·±åº¦å­¦ä¹ è®­ç»ƒå³å¯å¯¹å›¾åƒè¿›è¡Œæ¸…æ™°åº¦è¯„ä¼°å’Œåˆ†ç±»ã€‚

åŠŸèƒ½ç‰¹ç‚¹
ğŸš€ å…è®­ç»ƒ: ä½¿ç”¨ä¼ ç»ŸCVç®—æ³•ï¼Œæ— éœ€æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒ
ğŸ“Š å¤šç®—æ³•é›†æˆ: æ”¯æŒæ‹‰æ™®æ‹‰æ–¯ã€Sobelã€Brennerã€Tenengradç­‰å¤šç§æ¸…æ™°åº¦è¯„ä¼°ç®—æ³•
ğŸ”„ æ‰¹é‡å¤„ç†: æ”¯æŒå¤§æ‰¹é‡å›¾åƒçš„å¹¶è¡Œå¤„ç†
ğŸ“ æ™ºèƒ½æ–‡ä»¶ç®¡ç†: è‡ªåŠ¨è¯†åˆ«æ—¶é—´æ ¼å¼æ–‡ä»¶å¤¹ï¼Œå¤„ç†å›¾åƒ-JSONæ–‡ä»¶å¯¹
ğŸ“ˆ è¯¦ç»†æŠ¥å‘Š: ç”Ÿæˆå¤„ç†æŠ¥å‘Šã€å¯è§†åŒ–å›¾è¡¨å’ŒCSVå¯¼å‡º
ğŸ›  çµæ´»é…ç½®: æ”¯æŒé…ç½®æ–‡ä»¶å’Œå‘½ä»¤è¡Œå‚æ•°
ğŸ–¥ äº¤äº’æ¨¡å¼: æä¾›ç”¨æˆ·å‹å¥½çš„äº¤äº’å¼è¿è¡Œæ¨¡å¼
é¡¹ç›®ç»“æ„
image_sharpness_classifier/
â”œâ”€â”€ sharpness_classifier.py    # æ ¸å¿ƒæ¸…æ™°åº¦åˆ†ç±»ç®—æ³•
â”œâ”€â”€ file_utils.py             # æ–‡ä»¶å¤„ç†å·¥å…·
â”œâ”€â”€ image_processor.py        # å›¾åƒå¤„ç†å™¨
â”œâ”€â”€ batch_processor.py        # æ‰¹é‡å¤„ç†å™¨
â”œâ”€â”€ report_generator.py       # æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ main.py                   # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ requirements.txt         # ä¾èµ–æ–‡ä»¶
â””â”€â”€ README.md               # è¯´æ˜æ–‡æ¡£
å®‰è£…ä¾èµ–
bash
pip install -r requirements.txt
æ ¸å¿ƒä¾èµ–
opencv-python: å›¾åƒå¤„ç†
numpy: æ•°å€¼è®¡ç®—
scipy: ç§‘å­¦è®¡ç®—
tqdm: è¿›åº¦æ¡æ˜¾ç¤º
å¯é€‰ä¾èµ–ï¼ˆç”¨äºæŠ¥å‘Šç”Ÿæˆï¼‰
matplotlib: å›¾è¡¨ç”Ÿæˆ
seaborn: ç»Ÿè®¡å›¾è¡¨
pandas: æ•°æ®å¤„ç†å’ŒCSVå¯¼å‡º
ä½¿ç”¨æ–¹æ³•
1. å‘½ä»¤è¡Œæ¨¡å¼
åŸºæœ¬ä½¿ç”¨
bash
python main.py --source /path/to/source --output /path/to/output
ä½¿ç”¨é…ç½®æ–‡ä»¶
bash
python main.py --config config.json
é¢„è§ˆæ¨¡å¼
bash
python main.py --preview --source /path/to/source --max-folders 3
åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿
bash
python main.py --create-config my_config.json
2. äº¤äº’æ¨¡å¼
ç›´æ¥è¿è¡Œä¸»ç¨‹åºï¼ŒæŒ‰æç¤ºè¾“å…¥å‚æ•°ï¼š

bash
python main.py
3. é«˜çº§é€‰é¡¹
bash
python main.py \
  --source ./images \
  --output ./results \
  --max-workers 8 \
  --log-level DEBUG \
  --log-file processing.log \
  --no-visual \
  --no-csv
é…ç½®æ–‡ä»¶
åˆ›å»º config.json æ–‡ä»¶æ¥è‡ªå®šä¹‰å¤„ç†å‚æ•°ï¼š

json
{
  "source_root": "/path/to/source",
  "output_root": "/path/to/output",
  "classifier_params": {
    "laplacian_threshold": 100.0,
    "sobel_threshold": 50.0,
    "brenner_threshold": 1000.0,
    "tenengrad_threshold": 500.0
  },
  "processing": {
    "max_workers": 4,
    "supported_formats": [".jpg", ".png", ".bmp"]
  },
  "reports": {
    "generate_visual": true,
    "export_csv": true
  }
}
ç®—æ³•è¯´æ˜
æ”¯æŒçš„æ¸…æ™°åº¦è¯„ä¼°ç®—æ³•
æ‹‰æ™®æ‹‰æ–¯æ–¹å·® (Laplacian Variance)
ä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯ç®—å­æ£€æµ‹è¾¹ç¼˜å˜åŒ–
é€‚ç”¨äºå¤§éƒ¨åˆ†è‡ªç„¶å›¾åƒ
Sobelç®—å­æ–¹å·® (Sobel Variance)
åŸºäºSobelè¾¹ç¼˜æ£€æµ‹ç®—å­
å¯¹å™ªå£°è¾ƒä¸ºé²æ£’
Brenneræ¢¯åº¦ (Brenner Gradient)
è®¡ç®—æ°´å¹³æ–¹å‘æ¢¯åº¦çš„å¹³æ–¹å’Œ
è®¡ç®—é€Ÿåº¦å¿«
Tenengradç®—å­ (Tenengrad)
æ”¹è¿›çš„æ¢¯åº¦æ–¹æ³•
è®¾ç½®é˜ˆå€¼è¿‡æ»¤ä½æ¢¯åº¦åŒºåŸŸ
é›†æˆåˆ†ç±»ç­–ç•¥
å·¥å…·ä½¿ç”¨æŠ•ç¥¨æœºåˆ¶è¿›è¡Œæœ€ç»ˆåˆ†ç±»ï¼š

æ¯ä¸ªç®—æ³•æ ¹æ®å…¶é˜ˆå€¼è¿›è¡ŒäºŒåˆ†ç±»åˆ¤æ–­
è¶…è¿‡åŠæ•°ç®—æ³•è®¤ä¸ºå›¾åƒæ¸…æ™°æ—¶ï¼Œæœ€ç»ˆåˆ¤å®šä¸ºæ¸…æ™°
å¦åˆ™åˆ¤å®šä¸ºæ¨¡ç³Š
è¾“å…¥æ–‡ä»¶ç»“æ„
å·¥å…·æœŸæœ›çš„è¾“å…¥æ–‡ä»¶ç»“æ„ï¼š

source_folder/
â”œâ”€â”€ 2024-01-01/          # æ—¶é—´æ ¼å¼æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ image001.jpg     # å›¾åƒæ–‡ä»¶
â”‚   â”œâ”€â”€ image001.json    # å¯¹åº”çš„JSONå…ƒæ•°æ®
â”‚   â”œâ”€â”€ image002.jpg
â”‚   â””â”€â”€ image002.json
â”œâ”€â”€ 2024-01-02/
â”‚   â”œâ”€â”€ photo001.png
â”‚   â”œâ”€â”€ photo001.json
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
æ”¯æŒçš„æ—¶é—´æ ¼å¼
2024-01-01 (YYYY-MM-DD)
2024_01_01 (YYYY_MM_DD)
20240101 (YYYYMMDD)
2024-01-01_12-30-45 (YYYY-MM-DD_HH-MM-SS)
20240101123045 (YYYYMMDDHHMMSS)
è¾“å‡ºç»“æ„
output_folder/
â”œâ”€â”€ 2024-01-01/
â”‚   â”œâ”€â”€ æ¸…æ™°/             # æ¸…æ™°å›¾åƒåŠå…¶JSONæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ image001.jpg
â”‚   â”‚   â””â”€â”€ image001.json
â”‚   â””â”€â”€ æ¨¡ç³Š/             # æ¨¡ç³Šå›¾åƒåŠå…¶JSONæ–‡ä»¶
â”‚       â”œâ”€â”€ image002.jpg
â”‚       â””â”€â”€ image002.json
â”œâ”€â”€ processing_report.json      # å¤„ç†æŠ¥å‘Š
â”œâ”€â”€ detailed_analysis.json      # è¯¦ç»†åˆ†æ
â”œâ”€â”€ processing_results.csv      # CSVæ ¼å¼ç»“æœ
â”œâ”€â”€ quality_distribution.png    # è´¨é‡åˆ†å¸ƒå›¾
â”œâ”€â”€ folder_distribution.png     # æ–‡ä»¶å¤¹åˆ†å¸ƒå›¾
â””â”€â”€ quality_ratio_histogram.png # æ¸…æ™°åº¦æ¯”ä¾‹ç›´æ–¹å›¾
é˜ˆå€¼è°ƒä¼˜
ä¸åŒç±»å‹çš„å›¾åƒå¯èƒ½éœ€è¦ä¸åŒçš„é˜ˆå€¼è®¾ç½®ï¼š

è‡ªç„¶é£æ™¯ç…§ç‰‡
json
{
  "laplacian_threshold": 100.0,
  "sobel_threshold": 50.0,
  "brenner_threshold": 1000.0,
  "tenengrad_threshold": 500.0
}
äººåƒç…§ç‰‡
json
{
  "laplacian_threshold": 80.0,
  "sobel_threshold": 40.0,
  "brenner_threshold": 800.0,
  "tenengrad_threshold": 400.0
}
æ–‡æ¡£/æ–‡å­—å›¾åƒ
json
{
  "laplacian_threshold": 150.0,
  "sobel_threshold": 70.0,
  "brenner_threshold": 1500.0,
  "tenengrad_threshold": 700.0
}
æ€§èƒ½ä¼˜åŒ–
æé«˜å¤„ç†é€Ÿåº¦
å¢åŠ çº¿ç¨‹æ•°: æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´ max_workers
å‡å°‘ç®—æ³•: å¦‚æœå¯¹ç²¾åº¦è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥åªä½¿ç”¨å•ä¸€ç®—æ³•
æ‰¹é‡å¤§å°: å¤„ç†å¤§é‡å°æ–‡ä»¶æ—¶ï¼Œé€‚å½“å¢åŠ çº¿ç¨‹æ•°
å†…å­˜ä¼˜åŒ–
é™ä½çº¿ç¨‹æ•°: å¤„ç†å¤§å›¾åƒæ—¶å‡å°‘å¹¶å‘æ•°
å›¾åƒæ ¼å¼: ä¼˜å…ˆä½¿ç”¨å‹ç¼©æ ¼å¼å‡å°‘å†…å­˜å ç”¨
å¸¸è§é—®é¢˜
Q: å¦‚ä½•å¤„ç†éæ—¶é—´æ ¼å¼çš„æ–‡ä»¶å¤¹ï¼Ÿ
A: å¯ä»¥ä¿®æ”¹ file_utils.py ä¸­çš„ is_time_format æ–¹æ³•ï¼Œæˆ–ä½¿ç”¨ run_with_custom_filter æ–¹æ³•è‡ªå®šä¹‰æ–‡ä»¶å¤¹è¿‡æ»¤é€»è¾‘ã€‚

Q: å¦‚ä½•è°ƒæ•´åˆ†ç±»ç²¾åº¦ï¼Ÿ
A: é€šè¿‡è°ƒæ•´å„ç®—æ³•çš„é˜ˆå€¼å‚æ•°ï¼Œå¯ä»¥æé«˜æˆ–é™ä½åˆ†ç±»ä¸¥æ ¼ç¨‹åº¦ã€‚è¾ƒé«˜çš„é˜ˆå€¼ä¼šå¯¼è‡´æ›´å°‘çš„å›¾åƒè¢«åˆ¤å®šä¸ºæ¸…æ™°ã€‚

Q: æ”¯æŒå“ªäº›å›¾åƒæ ¼å¼ï¼Ÿ
A: é»˜è®¤æ”¯æŒ JPGã€PNGã€BMPã€TIFFã€WebP æ ¼å¼ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚

Q: å¦‚ä½•å¤„ç†å¤§æ‰¹é‡å›¾åƒï¼Ÿ
A: å»ºè®®ä½¿ç”¨é¢„è§ˆæ¨¡å¼å…ˆæµ‹è¯•å°æ‰¹é‡ï¼Œç¡®è®¤æ•ˆæœåå†è¿›è¡Œå®Œæ•´å¤„ç†ã€‚å¯ä»¥é€‚å½“å¢åŠ çº¿ç¨‹æ•°åŠ é€Ÿå¤„ç†ã€‚

æ‰©å±•å¼€å‘
æ·»åŠ æ–°çš„æ¸…æ™°åº¦ç®—æ³•
åœ¨ sharpness_classifier.py ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼š

python
def your_custom_method(self, image: np.ndarray) -> float:
    # å®ç°ä½ çš„ç®—æ³•
    return metric_value
è‡ªå®šä¹‰æ–‡ä»¶å¤„ç†é€»è¾‘
ç»§æ‰¿å¹¶æ‰©å±• FileUtils ç±»ï¼š

python
class CustomFileUtils(FileUtils):
    def find_custom_file_pairs(self, folder: Path):
        # å®ç°è‡ªå®šä¹‰æ–‡ä»¶åŒ¹é…é€»è¾‘
        pass
è®¸å¯è¯
MIT License

è´¡çŒ®
æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

æ›´æ–°æ—¥å¿—
v1.0.0
åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
æ”¯æŒå¤šç§æ¸…æ™°åº¦è¯„ä¼°ç®—æ³•
æ‰¹é‡å¤„ç†å’ŒæŠ¥å‘Šç”ŸæˆåŠŸèƒ½
å‘½ä»¤è¡Œå’Œäº¤äº’æ¨¡å¼æ”¯æŒ
